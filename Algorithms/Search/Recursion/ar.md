# **الاستدعاء الذاتي (Recursion)**

الاستدعاء الذاتي هو مفهوم أساسي في البرمجة، حيث تستدعي الدالة نفسها لحل المشكلة.

#### ماذا يحدث عندما نستدعي دالة؟

- تتوقف الدالة الحالية، وتبدأ دالة جديدة في التنفيذ.
- بمجرد انتهاء الدالة الجديدة من التنفيذ، تكمل الدالة الأصلية من نفس المكان الذي توقفت عنده.

#### ماذا يحدث عندما تستدعي الدالة التي استدعيناها دالةً أخرى؟

يمكننا تشبيه تنفيذ برنامجنا بمكدس (Stack) من الدوال. عند بدء البرنامج، يتم وضع الدالة الرئيسية في هذا المكدس، ومع كل استدعاء، يتوقف التنفيذ في مكان ما وتتم إضافة الدالة الجديدة إلى المكدس.

يتم تخزين معاملات الدالة والمتغيرات المحلية لها في إطار مكدس جديد على مكدس الاستدعاء.

بمجرد انتهاء الدالة من التنفيذ، يتم إزالتها من المكدس، ويستمر التنفيذ من حيث تم استدعاؤها.

---

# **مثال: تتبع التنفيذ وتمثيل مكدس الاستدعاء**

## **الكود:**

```cpp
#include <iostream>

using namespace std;

int B(int a, int b) {
    return a + b;
}

int A(int a, int b, int c) {
    return B(a, b) + c;
}

int main() {
    cout << A(1, 2, 3) << endl;
}
```

---

## **تنفيذ خطوة بخطوة**

### **1. يتم استدعاء `main()`**

- يبدأ تنفيذ البرنامج من `main()`.
- داخل `main()`، يتم استدعاء الدالة `A(1, 2, 3)`.

### **2. يتم استدعاء `A(1, 2, 3)`**

- ينتقل التحكم إلى الدالة `A()` وتبدأ في التنفيذ.
- داخل `A()`، يتم استدعاء الدالة `B(1, 2)`.

### **3. يتم استدعاء `B(1, 2)`**

- ينتقل التحكم إلى الدالة `B()` وتبدأ في التنفيذ.
- تقوم `B(1, 2)` بحساب `1 + 2 = 3` وتعيد القيمة `3` إلى `A()`.

### **4. تستأنف `A(1, 2, 3)`**

- تقوم `A(1, 2, 3)` الآن بحساب `B(1, 2) + c = 3 + 3 = 6` وتعيد `6` إلى `main()`.

### **5. تستأنف `main()`**

- تستقبل `main()` القيمة `6` من `A(1, 2, 3)`.
- تطبع `"6"` على الشاشة.
- تنتهي `main()` ويخرج البرنامج.

---

## **تمثيل مكدس الاستدعاء**

### **الخطوة 1: يتم استدعاء `main()`**

```
Stack:
------------------
| main()         |
------------------
```

### **الخطوة 2: يتم استدعاء `A(1, 2, 3)`**

```
Stack:
------------------
| A(1, 2, 3)     |
------------------
| main()         |
------------------
```

### **الخطوة 3: يتم استدعاء `B(1, 2)` من `A(1, 2, 3)`**

```
Stack:
------------------
| B(1, 2)        |
------------------
| A(1, 2, 3)     |
------------------
| main()         |
------------------
```

### **الخطوة 4: تعيد `B(1, 2)` القيمة `3` وتُزال من المكدس**

```
Stack:
------------------
| A(1, 2, 3)     |
------------------
| main()         |
------------------
```

### **الخطوة 5: تعيد `A(1, 2, 3)` القيمة `6` وتُزال من المكدس**

```
Stack:
------------------
| main()         |
------------------
```

### **الخطوة 6: تطبع `main()` القيمة `6` وينتهي البرنامج (المكدس الآن فارغ)**

```
(المكدس الآن فارغ)
```

---

## **الناتج النهائي:**

```
6
```

---


