### كيفية التحقق مما إذا كان العدد أوليًا

عند إعطائك عددًا $n$، كيف يمكنك تحديد ما إذا كان **عددًا أوليًا** أم **غير أولي**؟

حسب التعريف، فإن العدد $n > 1$ هو **عدد أولي** إذا لم يكن له قواسم غير $1$ و $n$ نفسه.  
لذا، للتحقق من أولية العدد، يجب أن نتأكد من أن **لا يوجد عدد آخر يقسمه**.

توجد طرق مختلفة للقيام بذلك — بدءًا من طريقة بدائية تعتمد على القوة الغاشمة، إلى طرق أكثر كفاءة.

---

### التحقق البدائي من الأولية – $O(n)$

الطريقة الأبسط هي أن نحاول قسمة $n$ على كل عدد من $2$ حتى $n - 1$.

إذا وجدنا أن أحد هذه الأعداد يقسم $n$ تمامًا، فهذا يعني أن $n$ **ليس أوليًا**.

#### شبه كود:

```plaintext
If n is less than or equal to 1:
    Return false

For each number i from 2 to n - 1:
    If i divides n:
        Return false

Return true
```

#### التنفيذ

=== "c++"
```cpp
// الطريقة البدائية للتحقق مما إذا كان عدد أوليًا
bool isPrimeNaive(int n) {
    if (n <= 1) return false;

    for (int d = 2; d < n; ++d) {
        if (n % d == 0) {
            // وُجد قاسم → العدد غير أولي
            return false;
        }
    }

    return true; // لم يُوجد أي قواسم → العدد أولي
}
```

=== "Python"
```python
# الطريقة البدائية للتحقق مما إذا كان عدد أوليًا
def is_prime_naive(n):
    if n <= 1:
        return False

    for d in range(2, n):
        if n % d == 0:
            # وُجد قاسم → العدد غير أولي
            return False

    return True  # لم يُوجد أي قواسم → العدد أولي
```

---

### التحقق المحسن من الأولية – $O(\sqrt{n})$

يمكننا تحسين الطريقة البدائية بشكل كبير باستخدام فكرة أساسية حول القواسم.

لنفرض أننا نريد التحقق من أولية عدد $n$.  
إذا لم يكن $n$ عددًا أوليًا، فهذا يعني بالضرورة أنه يملك قاسمًا **غير** $1$ و $n$ نفسه.  
ولنُطلق على هذا القاسم اسم $d$.

والآن، من خصائص القواسم (كما ناقشنا سابقًا في **مقدمة نظرية الأعداد**)، نعلم:

> كل قاسم $d$ للعدد $n$ يظهر مع زوج مقابل $\frac{n}{d}$  
> وفي أي زوج كهذا، **يجب أن يكون على الأقل أحد العددين ≤ \sqrt{n}**

وهذا يقودنا إلى الاستنتاج التالي:

> إذا كان للعدد $n$ قاسم غير 1 و $n$، فإن **العضو الأصغر في الزوج** يجب أن يكون $\le \sqrt{n}$

لذلك، بدلاً من التحقق من كل عدد من $2$ حتى $n - 1$، نحتاج فقط إلى التحقق حتى **$\sqrt{n}$**.

إذا لم يقسم أي عدد في هذا النطاق $n$، فإن $n$ عدد أولي.

#### شبه كود:

```plaintext
If n is less than or equal to 1:
    Return false

For each number d from 2 to sqrt(n):
    If n % d == 0:
        Return false

Return true
```

#### التنفيذ

=== "c++"
```cpp
// الطريقة المحسنة للتحقق من أولية عدد باستخدام sqrt(n)
bool isPrime(int n) {
    if (n <= 1) return false;

    for (int d = 2; d * d <= n; ++d) {
        if (n % d == 0) {
            // وُجد قاسم → العدد غير أولي
            return false;
        }
    }

    return true; // لم يُوجد أي قواسم في [2, sqrt(n)] → العدد أولي
}
```

=== "Python"
```python
import math

# الطريقة المحسنة للتحقق من أولية عدد باستخدام sqrt(n)
def is_prime(n):
    if n <= 1:
        return False

    for d in range(2, int(math.isqrt(n)) + 1):
        if n % d == 0:
            # وُجد قاسم → العدد غير أولي
            return False

    return True  # لم يُوجد أي قواسم في [2, sqrt(n)] → العدد أولي
```

هذا التحسين يقلل بشكل كبير من عدد المحاولات، خاصة عند التعامل مع أعداد كبيرة.
